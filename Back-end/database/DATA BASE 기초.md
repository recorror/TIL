### 데이터베이스란 ? 
- 데이터를 저장한 후 첨삭해서 쉽게 사용할 수 있게 손질해주는 것.

옛날 방식은 너무 낡아서 읽기 어렵고 쓰는 것도 어려웠다. 때문에 쉽게 쓰게하기 위해 데이터 베이스가 개발되었다.

#### index를 쓰는 방법
- 반씩 끊어서 sort해서 필요한걸 찾아나간다.
- 인덱스는 여러 항목을 조합하여 저장할 수 있다.
	- 예를들면 상품명, 지역, 이름, 데이터 코드 등이 있을 때 지역을 중심으로 정렬을 할 수 있다던가 하는 내용.
- 하나의 테이블에 복수의 인덱스를 지정할 수 있다.
- 인덱스를 효율적으로 사용해야한다.
	- 더 효율적으로 데이터를 처리하기 위함.
- 주키(primary key/기본키)와 외부키(외래키)
	- 주키는 절대 바꿀 수 없는(바꾸면 안 되는) 주력 키
	- 또한 해당 테이블을 구별하는 메인이 되는 키.
	- 외부키(외래키)는 다른 데이터 테이블에 있는 내용을 불러오기 위한 키이다.
		- 테이블간의 관계를 나타낼때 사용하며, 다른 테이블의 기본키를 참조해 외래키로 사용한다.
		- 예를들면 ㄱ테이블의 1번 주키의 이름이라는 것을 ㄴ테이블의 1번의 주키 철수라는 이름을 불러오기 위한 키인 것. 참조키라고도 볼 수 있다.
#### 「록」이란?
- DB를 안전하게 혼자서 사용할 수 있게 해주는 부분.
- 안 쓰면 데이터베이스를 동시에 사용하게 되어서 정보 혼란이 올 수 있다.
	- ㄱ이 가격을 바꾸고 ㄴ이 수량을 바꾸는데 동시에 처리되면 안 되기 때문
- 록 정보를 확인할 수 있어야한다. DB를 관리하는 록 정보를 통해 동시에 접속할 수 없게 한 명만이 접속해서 DB를 편집할 수 있게 해야한다.
#### 트랜젝션(Transaction)(トランザクション)
- 데이터베이스의 상태를 변경시키기 위해 수행하는 작업 단위이다.
- 데이터베이스의 상태를 변경시킨다는 이야기는 SELECT, UPDATE, INSERT, DELETE 와 같은 행동을 뜻한다.
- 이런 트랜잭션은 상황에 따라 여러 개가 만들어질 수 있다.
	- 여러 개의 트랜잭션의 실행 중 하나라도 에러가 나면 전부 철회된다.
- 그 하나의 트랜잭션은 Commit (저장) 되거나 Rollback (철회)될 수 있다.
- 데이터베이스에서 트랜잭션 구현 방법  
	- 트랜잭션을 실현하기 위해 데이터베이스는 다음과 같은 기능을 구현한다.  
		- 데이터를 갱신한 것만으로는 갱신 내용은 확정되지 않는다.
		- Commit이 실행되면 업데이트 내용을 확정한다.
		- Rollback이 실행되면 업데이트 내용을 되돌리기.
#### DB에서 데이터처리 방법
- 낙관적 록
	- A와 B가 동시에 데이터를 편집하고 있을 때 A가 먼저 등록을 완료한다면 B는 편집 완료 시 에러가 발생하게 된다.
	- 그 후 에러 발생과 동시에 A가 편집한 데이터를 받은 후 다시 자신의 데이터를 등록해야한다.
	- ex) app이나 web에서 비행기의 좌석을 예매하는 것.
- 비관적 록
	- A가 편집을 하고 있다면 B는 편집화면에 들어갈 수조차 없다.
	- A가 편집을 끝낸 후에야 B는 편집을 할 수 있는 것이다.
	- ex) 공항의 판매원을 통해 비행기의 좌석을 예매하는 것.
- DB에서 록하는 방법
	- SELECT xxx FROM xxx [WHERE xxxx] **FOR UPDATE;  
		- → 데이터를 편집 잠금하여 취득한다.
		- 이미 잠겨 있는 경우 잠금이 해제될 때까지 기다리기 잠글 수 있을 때까지 애플리케이션 자체가 대기 상태가 되어 사용자 조작을 받지 않게 되므로 업무 시스템에서 자주 사용되지 않는다  
	- SELECT xxx FROM xxx [WHERE xxxx] **FOR UPDATE NOWAIT;  
		- → 데이터를 편집 잠금하여 취득한다.이미 잠겨 있는 경우 대기하지 않고 실행 에러가 난다.  
		- 프로그램에서는 예외 처리에서 '다른 사람에 의해 잠겨 있는' 에러임을 검출하고 사용자에게 「다른 유저가 편집중이므로 잠시 후 재처리 해 주세요」 등 통지할 수 있다.
	 - for update : 조회가 되는 레코드에 대한 Row LOCK 설정
	 - for update nowait : wait 0과 동일한 옵션, 대기 없이 ORA-00054 발생
	 - for update wait 3  : 5초 대기 후, ORA-30006 발생